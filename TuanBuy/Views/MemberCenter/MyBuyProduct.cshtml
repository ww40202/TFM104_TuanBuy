<script src="/VueComponent/VueDemo.js"></script>

<div class="container mtb2rem" id="app">
    <div class="row">
        <test v-bind:user="user"></test>
        <div class="col-lg-10 purchasecolor">
            <ul class="nav nav-tabs" id="myTab" role="tablist">

                <li class="nav-item">
                    <a class="nav-link active" id="all-tallab" data-toggle="tab" href="#all" role="tab" aria-controls="all"
                       aria-selected="false">待付款</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="product1-tab" data-toggle="tab" href="#product1" role="tab"
                       aria-controls="product1" aria-selected="false">待出貨</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="product2-tab" data-toggle="tab" href="#product2" role="tab"
                       aria-controls="product2" aria-selected="false">待收貨</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="product3-tab" data-toggle="tab" href="#product3" role="tab"
                       aria-controls="product3" aria-selected="false">完成</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="product4-tab" data-toggle="tab" href="#product4" role="tab"
                       aria-controls="product4" aria-selected="false">不成立</a>
                </li>
            </ul>
              <div class="tab-content" id="myTabContent">
                <!--待付款商品-->
                <div class="tab-pane fade show active" id="all" role="tabpanel" aria-labelledby="all-tab" >
                    <div class="purchaseback" v-for="(item,index) in orderList" v-if="item.orderState==1">
                        <div class="purchasemg">
                            <div class="col-12 form-row">
                                <div>
                                    <!--賣家名稱-->
                                    <p class="purchaseowner">團主<!--：{{item.sellerName}}--></p>
                                </div>
                                <div class="purchasebtnsize"><button class="purchasebtn">聊聊</button></div>
                                <div class="purchasebtnsize"><button class="purchasebtn2">查看賣場</button></div>
                            </div>
                            <!--訂單明細-->
                            <div class="col-12 form-row purchaseimgborder">
                                <div class="col-2">
                                    <!--產品圖片-->
                                    <img v-bind:src="item.productPath"
                                         alt="產品圖片">
                                </div>
                                <div class="col-10">
                                    <!--產品敘述-->
                                    <div class="col-12 purchasetextbox">
                                        {{item.productDescription}}
                                    </div>
                                    <div class="purchasenumber">
                                        <!--商品數量-->
                                        <div class="col-6 form-row">
                                            X {{item.count}}
                                        </div>
                                        <!--商品金額-->
                                        <div class="col-6 form-row purchasecount">
                                            ${{item.productPrice}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 purchaseend">
                                <div class="purchaseorder">訂單金額:</div>
                                <div class="purchaseallmoney">${{productShoppingSum(index)}}</div>
                            </div>
                        </div>
                        @*<div class="col-12 purchaseend"><button class="purchasebtn purchasebuybtnsize">再買一次</button></div>*@
                    </div>
                </div>
                <!--待出貨商品-->
                <div class="tab-pane fade" id="product1" role="tabpanel" aria-labelledby="product1-tab">
                    <div class="purchaseback" v-for="(item,index) in orderList" v-if="item.orderState==2">
                        <div class="purchasemg">
                            <div class="col-12 form-row">
                                <div>
                                    <!--賣家名稱-->
                                    <p class="purchaseowner">團主<!--：{{item.sellerName}}--></p>
                                </div>
                                <div class="purchasebtnsize"><button class="purchasebtn">聊聊</button></div>
                                <div class="purchasebtnsize"><button class="purchasebtn2">查看賣場</button></div>
                            </div>
                            <!--訂單明細-->
                            <div class="col-12 form-row purchaseimgborder">
                                <div class="col-2">
                                    <!--產品圖片-->
                                    <img v-bind:src="item.productPath"
                                         alt="產品圖片">
                                </div>
                                <div class="col-10">
                                    <!--產品敘述-->
                                    <div class="col-12 purchasetextbox">
                                        {{item.productDescription}}
                                    </div>
                                    <div class="purchasenumber">
                                        <!--商品數量-->
                                        <div class="col-6 form-row">
                                            X {{item.count}}
                                        </div>
                                        <!--商品金額-->
                                        <div class="col-6 form-row purchasecount">
                                            ${{item.productPrice}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 purchaseend">
                                <div class="purchaseorder">訂單金額:</div>
                                <div class="purchaseallmoney">${{productShoppingSum(index)}}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--待收貨商品-->
                <div class="tab-pane fade" id="product2" role="tabpanel" aria-labelledby="product2-tab">
                    <div class="purchaseback" v-for="(item,index) in orderList"  v-if="item.orderState==3">
                        <div class="purchasemg">
                            <div class="col-12 form-row">
                                <div>
                                    <!--賣家名稱-->
                                    <p class="purchaseowner">團主<!--：{{item.sellerName}}--></p>
                                </div>
                                <div class="purchasebtnsize"><button class="purchasebtn">聊聊</button></div>
                                <div class="purchasebtnsize"><button class="purchasebtn2">查看賣場</button></div>
                            </div>
                            <!--訂單明細-->
                            <div class="col-12 form-row purchaseimgborder">
                                <div class="col-2">
                                    <!--產品圖片-->
                                    <img v-bind:src="item.productPath"
                                         alt="產品圖片">
                                </div>
                                <div class="col-10">
                                    <!--產品敘述-->
                                    <div class="col-12 purchasetextbox">
                                        {{item.productDescription}}
                                    </div>
                                    <div class="purchasenumber">
                                        <!--商品數量-->
                                        <div class="col-6 form-row">
                                            X {{item.count}}
                                        </div>
                                        <!--商品金額-->
                                        <div class="col-6 form-row purchasecount">
                                            ${{item.productPrice}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 purchaseend">
                                <div class="purchaseorder">訂單金額:</div>
                                <div class="purchaseallmoney">${{productShoppingSum(index)}}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--完成-->
                <div class="tab-pane fade" id="product3" role="tabpanel" aria-labelledby="product3-tab">
                    <!--v-for="item in orderList"-->
                    <div class="purchaseback" v-for="(item,index) in orderList" v-if="item.orderState==4">
                        <div class="purchasemg">
                            <div class="col-12 form-row">
                                <div>
                                    <!--賣家名稱-->
                                    <p class="purchaseowner">團主<!--：{{item.sellerName}}--></p>
                                </div>
                                <div class="purchasebtnsize"><button class="purchasebtn">聊聊</button></div>
                                <div class="purchasebtnsize"><button class="purchasebtn2">查看賣場</button></div>
                            </div>
                            <!--訂單明細-->
                            <div class="col-12 form-row purchaseimgborder">
                                <div class="col-2">
                                    <!--產品圖片-->
                                    <img v-bind:src="item.productPath"
                                         alt="產品圖片">
                                </div>
                                <div class="col-10">
                                    <!--產品敘述-->
                                    <div class="col-12 purchasetextbox">
                                        {{item.productDescription}}
                                    </div>
                                    <div class="purchasenumber">
                                        <!--商品數量-->
                                        <div class="col-6 form-row">
                                            X {{item.count}}
                                        </div>
                                        <!--商品金額-->
                                        <div class="col-6 form-row purchasecount">
                                            ${{item.productPrice}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 purchaseend">
                                <div class="purchaseorder">訂單金額:</div>
                                <div class="purchaseallmoney">${{productShoppingSum(index)}}</div>
                            </div>
                        </div>
                        <div class="col-12 purchaseend"><button class="purchasebtn purchasebuybtnsize">再買一次</button></div>
                    </div>
                    <!--  -->

                </div>
                <!--已取消訂單-->
                <div class="tab-pane fade" id="product4" role="tabpanel" aria-labelledby="product4-tab">
                    <div class="purchaseback" v-for="(item,index) in orderList" v-if="item.orderState==5">
                        <div class="purchasemg">
                            <div class="col-12 form-row">
                                <div>
                                    <!--賣家名稱-->
                                    <p class="purchaseowner">團主<!--：{{item.sellerName}}--></p>
                                </div>
                                <div class="purchasebtnsize"><button class="purchasebtn">聊聊</button></div>
                                <div class="purchasebtnsize"><button class="purchasebtn2">查看賣場</button></div>
                            </div>
                            <!--訂單明細-->
                            <div class="col-12 form-row purchaseimgborder">
                                <div class="col-2">
                                    <!--產品圖片-->
                                    <img v-bind:src="item.productPath"
                                         alt="產品圖片">
                                </div>
                                <div class="col-10">
                                    <!--產品敘述-->
                                    <div class="col-12 purchasetextbox">
                                        {{item.productDescription}}
                                    </div>
                                    <div class="purchasenumber">
                                        <!--商品數量-->
                                        <div class="col-6 form-row">
                                            X {{item.count}}
                                        </div>
                                        <!--商品金額-->
                                        <div class="col-6 form-row purchasecount">
                                            ${{item.productPrice}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 purchaseend">
                                <div class="purchaseorder">訂單金額:</div>
                                <div class="purchaseallmoney">${{productShoppingSum(index)}}</div>
                            </div>
                        </div>
                        <div class="col-12 purchaseend"><button class="purchasebtn purchasebuybtnsize">再買一次</button></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var vm = new Vue({
        el: '#app',
        data: {
            orderList:[],
            order: {
                address: '',
                count: 0,
                description: '',
                orderId: 0,
                orderState: 0,
                paymentType: 0,
                productDescription: 0,
                productId: 0,
                productName: 0,
                productPath: 0,
                productPrice: 0,
                sellerId: 0,
                sellerName: ""
            },
            user: {
                name: "",
                phone: "",
                birth: "",
                address: "",
                sex: "",
                uploadPicPath: ""
            }
        },
        mounted: function () {
            let self = this;
            axios.get("/api/MemberCenter/").then((resp) => { self.user = resp.data });
            axios.get("/MemberCenter/GetMyOrder/").then((resp) => { self.orderList = resp.data });
        },
        computed: {
            //計算商品單價總額
            productShoppingSum: function () {
                return (index) => {
                    return vm.orderList[index].productPrice * vm.orderList[index].count;
                }
                /*return app.productShoppings[index].productPrice * app.productShoppings[index].productCount;*/
            }
        }
    });
</script>
